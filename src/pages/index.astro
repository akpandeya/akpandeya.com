---
import BaseLayout from '../layouts/BaseLayout.astro';
import BlogCard from '../components/BlogCard.astro';
import Icon from '../components/Icon.astro';
import TechBadge from '../components/TechBadge.astro';
import SectionCard from '../components/SectionCard.astro';
import MetricHighlight from '../components/MetricHighlight.astro';
import TimelineItem from '../components/TimelineItem.astro';
import { getCollection } from 'astro:content';

// Fetch latest blog posts
const allPosts = await getCollection('blog', ({ data }) => {
  return !data.draft;
});

const recentPosts = allPosts
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);
---

<BaseLayout
  title="Avanindra Kumar Pandeya - Senior Software Developer"
  description="Senior Software Developer with 8+ years of experience building scalable backend systems. Expert in Python, distributed systems, optimization algorithms, and cloud infrastructure."
>
  <div class="max-w-content mx-auto px-4 py-12">
    <!-- Hero Section -->
    <section class="mb-20 relative">
      <!-- Gradient overlay -->
      <div class="absolute inset-0 bg-gradient-hero opacity-5 rounded-3xl -z-10 animate-gradient-shift"></div>

      <h1 class="text-6xl md:text-7xl font-bold mb-4 bg-gradient-to-r from-text to-accent dark:from-gray-100 dark:to-accent-dark bg-clip-text text-transparent">
        Avanindra Kumar Pandeya
      </h1>

      <p class="text-2xl text-gray-700 dark:text-gray-300 mb-2 font-medium">
        Senior Software Developer
      </p>
      <p class="text-gray-600 dark:text-gray-400 mb-8">Berlin, Germany</p>

      <!-- Metrics row -->
      <div class="flex flex-col md:flex-row gap-4 md:gap-6 my-8 max-w-2xl">
        <MetricHighlight value="8+" label="Years Experience" variant="primary" />
        <MetricHighlight value="€10M+" label="Cost Savings" variant="secondary" />
        <MetricHighlight value="Ph.D." label="Computational Physics" variant="primary" />
      </div>

      <!-- Social links with icons -->
      <div class="flex gap-4">
        <a
          href="https://github.com/akpandeya"
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center gap-2 px-4 py-2 bg-gradient-backend text-white rounded-lg hover:shadow-glow-blue transition-all duration-300 hover:scale-105"
        >
          <Icon name="github" class="w-5 h-5" />
          <span>GitHub</span>
        </a>
        <a
          href="https://de.linkedin.com/in/avanindra-kumar-pandeya-2469951b"
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:shadow-glow-blue transition-all duration-300 hover:scale-105"
        >
          <Icon name="linkedin" class="w-5 h-5" />
          <span>LinkedIn</span>
        </a>
      </div>
    </section>

    <!-- About Section -->
    <section class="mb-16">
      <div class="flex items-center gap-3 mb-6">
        <Icon name="user" class="w-8 h-8 text-accent dark:text-accent-dark" />
        <h2 class="text-3xl font-semibold text-text dark:text-gray-100">About</h2>
      </div>

      <SectionCard>
        <p class="text-gray-700 dark:text-gray-300 text-lg leading-relaxed">
          Senior Software Developer with <span class="font-bold text-accent dark:text-accent-dark">8+ years</span> of experience building scalable
          backend systems and data-driven solutions. Expert in Python, distributed
          systems, optimization algorithms, and cloud infrastructure. Proven track
          record of delivering <span class="font-bold text-optimization-from dark:text-optimization-to">multi-million Euro cost savings</span> through efficient
          system design and algorithmic optimization.
        </p>
      </SectionCard>
    </section>

    <!-- Experience Section -->
    <section class="mb-16">
      <div class="flex items-center gap-3 mb-6">
        <Icon name="briefcase" class="w-8 h-8 text-accent dark:text-accent-dark" />
        <h2 class="text-3xl font-semibold text-text dark:text-gray-100">Experience</h2>
      </div>

      <div class="relative">
        <!-- Timeline line -->
        <div class="absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-devops-from via-accent to-backend-from rounded-full"></div>

        <div class="space-y-8 pl-8">
          <TimelineItem
            title="Senior Software Developer (SCM & Automation)"
            organization="HelloFresh"
            location="Berlin, Germany"
            date="July 2021 – Present"
            bullets={[
              'Supply Chain Optimization: Engineered a Network Planning System using <span class="font-medium text-backend-from dark:text-backend-to">Python</span> and <span class="font-medium text-optimization-from dark:text-optimization-to">Pyomo/CP-SAT</span>, reducing operational costs by over <span class="font-bold text-optimization-from dark:text-optimization-to">€10 Million/year</span>.',
              'Data Pipelines: Orchestrated complex ETLs with <span class="font-medium text-data-from dark:text-data-to">Apache Airflow</span> to transform order data into multi-format outputs for internal downstream systems.',
              'Real-time Streaming: Implemented order streaming using <span class="font-medium text-data-from dark:text-data-to">Kafka</span> to ensure immediate synchronization with warehouse processes.',
              'Architecture: Designed and deployed asynchronous microservices on <span class="font-medium text-devops-from dark:text-devops-to">Kubernetes</span> using <span class="font-medium text-devops-from dark:text-devops-to">Terraform</span> for Infrastructure as Code.',
              'Hybrid Logic: Solved warehouse scheduling constraints by building a performance-optimized <span class="font-medium text-backend-from dark:text-backend-to">Kotlin & Python</span> hybrid application.'
            ]}
            isCurrent={true}
          />

          <TimelineItem
            title="Full Stack Developer & Researcher"
            organization="Max Planck Institute"
            location="Halle, Germany"
            date="July 2015 – June 2021"
            bullets={[
              'Internal Tooling: Built a custom Experiment Management System with a <span class="font-medium text-backend-from dark:text-backend-to">Django</span> backend and <span class="font-medium text-frontend-from dark:text-frontend-to">React.js</span> frontend to manage and visualize massive scientific datasets.',
              'Automation: Developed <span class="font-medium text-backend-from dark:text-backend-to">Python</span> scripts for hardware interfacing and automated data analysis, replacing manual workflows.',
              'DevOps: Established <span class="font-medium text-devops-from dark:text-devops-to">Jenkins</span> pipelines for automated testing (TDD) and rapid deployment of web services.'
            ]}
            isLast={true}
          />
        </div>
      </div>
    </section>

    <!-- Tech Stack Section -->
    <section class="mb-16">
      <div class="flex items-center gap-3 mb-6">
        <Icon name="code" class="w-8 h-8 text-accent dark:text-accent-dark" />
        <h2 class="text-3xl font-semibold text-text dark:text-gray-100">Tech Stack</h2>
      </div>

      <div class="grid md:grid-cols-2 gap-6">
        <!-- Backend -->
        <SectionCard glowEffect>
          <h3 class="font-semibold mb-4 text-xl flex items-center gap-2 text-text dark:text-gray-100">
            <span class="text-backend-from">▹</span> Backend
          </h3>
          <div class="flex flex-wrap gap-2">
            <TechBadge tech="Python (Expert)" category="backend" />
            <TechBadge tech="Kotlin" category="backend" />
            <TechBadge tech="FastAPI" category="backend" />
            <TechBadge tech="Django" category="backend" />
            <TechBadge tech="Django REST" category="backend" />
            <TechBadge tech="SQLAlchemy" category="backend" />
          </div>
        </SectionCard>

        <!-- Data & Automation -->
        <SectionCard glowEffect>
          <h3 class="font-semibold mb-4 text-xl flex items-center gap-2 text-text dark:text-gray-100">
            <span class="text-data-from">▹</span> Data & Automation
          </h3>
          <div class="flex flex-wrap gap-2">
            <TechBadge tech="Apache Airflow" category="data" />
            <TechBadge tech="Kafka" category="data" />
            <TechBadge tech="RabbitMQ" category="data" />
            <TechBadge tech="NumPy" category="data" />
            <TechBadge tech="SciPy" category="data" />
            <TechBadge tech="Pandas" category="data" />
            <TechBadge tech="Pyomo" category="data" />
            <TechBadge tech="OR-Tools" category="data" />
          </div>
        </SectionCard>

        <!-- DevOps & Cloud -->
        <SectionCard glowEffect>
          <h3 class="font-semibold mb-4 text-xl flex items-center gap-2 text-text dark:text-gray-100">
            <span class="text-devops-from">▹</span> DevOps & Cloud
          </h3>
          <div class="flex flex-wrap gap-2">
            <TechBadge tech="Kubernetes (K8s)" category="devops" />
            <TechBadge tech="Docker" category="devops" />
            <TechBadge tech="Helm" category="devops" />
            <TechBadge tech="Terraform (IaC)" category="devops" />
            <TechBadge tech="Jenkins" category="devops" />
            <TechBadge tech="GitHub Actions" category="devops" />
            <TechBadge tech="Azure" category="devops" />
            <TechBadge tech="GCP" category="devops" />
            <TechBadge tech="Linux (Debian)" category="devops" />
          </div>
        </SectionCard>

        <!-- Frontend -->
        <SectionCard glowEffect>
          <h3 class="font-semibold mb-4 text-xl flex items-center gap-2 text-text dark:text-gray-100">
            <span class="text-frontend-from">▹</span> Frontend
          </h3>
          <div class="flex flex-wrap gap-2">
            <TechBadge tech="React.js" category="frontend" />
            <TechBadge tech="JavaScript" category="frontend" />
            <TechBadge tech="HTML5" category="frontend" />
            <TechBadge tech="CSS3" category="frontend" />
          </div>
        </SectionCard>
      </div>
    </section>

    <!-- Education Section -->
    <section class="mb-16">
      <div class="flex items-center gap-3 mb-6">
        <Icon name="graduation" class="w-8 h-8 text-accent dark:text-accent-dark" />
        <h2 class="text-3xl font-semibold text-text dark:text-gray-100">Education</h2>
      </div>

      <div class="relative">
        <div class="absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-data-from to-data-to rounded-full"></div>

        <div class="space-y-6 pl-8">
          <TimelineItem
            title="Ph.D., Nano Science / Computational Physics"
            organization="Max Planck Institute / Martin Luther University, Halle"
            date="2015 - 2021"
            description="Focus: Simulation and Modeling of Quantum Materials"
          />

          <TimelineItem
            title="M.Tech, Materials Science"
            organization="Indian Institute of Technology (IIT) Kanpur"
            date="2011 - 2013"
            description="<span class='font-semibold text-optimization-from dark:text-optimization-to'>CPI: 9.47/10</span>"
          />

          <TimelineItem
            title="B.Tech, Electronics & Communication"
            organization="Mizoram University"
            date="2006 - 2010"
            description="<span class='font-semibold bg-gradient-to-r from-yellow-500 to-yellow-600 bg-clip-text text-transparent'>Gold Medalist / Topper</span>"
            isLast={true}
          />
        </div>
      </div>
    </section>

    <!-- Recent Writing Section -->
    {
      recentPosts.length > 0 && (
        <section class="mb-16">
          <div class="flex justify-between items-baseline mb-6">
            <h2 class="text-3xl font-semibold text-text dark:text-gray-100">Recent Writing</h2>
            <a
              href="/blog"
              class="text-accent dark:text-accent-dark hover:text-accent-hover dark:hover:text-cyan-300 text-sm transition-all duration-300 hover:translate-x-1"
            >
              View all posts →
            </a>
          </div>
          <div>
            {recentPosts.map((post) => (
              <BlogCard
                title={post.data.title}
                description={post.data.description}
                pubDate={post.data.pubDate}
                slug={post.slug}
              />
            ))}
          </div>
        </section>
      )
    }

    <!-- Contact Section -->
    <section class="mb-16">
      <div class="flex items-center gap-3 mb-6">
        <Icon name="mail" class="w-8 h-8 text-accent dark:text-accent-dark" />
        <h2 class="text-3xl font-semibold text-text dark:text-gray-100">Contact</h2>
      </div>

      <SectionCard gradient glowEffect>
        <p class="text-gray-700 dark:text-gray-300 mb-6 text-lg">
          Connect with me on GitHub or LinkedIn to discuss software engineering, optimization, or potential collaborations.
        </p>

        <div class="flex flex-wrap gap-4">
          <a
            href="https://github.com/akpandeya"
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-2 px-5 py-3 bg-gray-900 dark:bg-gray-700 text-white rounded-lg hover:bg-gray-800 dark:hover:bg-gray-600 transition-all duration-300 hover:scale-105 hover:shadow-lg"
          >
            <Icon name="github" class="w-5 h-5" />
            <span class="font-medium">GitHub</span>
          </a>
          <a
            href="https://de.linkedin.com/in/avanindra-kumar-pandeya-2469951b"
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-500 hover:to-blue-600 transition-all duration-300 hover:scale-105 hover:shadow-glow-blue"
          >
            <Icon name="linkedin" class="w-5 h-5" />
            <span class="font-medium">LinkedIn</span>
          </a>
        </div>
      </SectionCard>
    </section>
  </div>
</BaseLayout>
