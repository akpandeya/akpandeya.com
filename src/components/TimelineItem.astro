---
interface Props {
  title: string;
  organization: string;
  location?: string;
  date: string;
  description?: string;
  bullets?: string[];
  isLast?: boolean;
  isCurrent?: boolean;
}

const { title, organization, location, date, description, bullets, isLast = false, isCurrent = false } = Astro.props;
---

<div class="relative pl-8 pb-8">
  <!-- Timeline dot -->
  <div class={`
    absolute left-0 top-1 w-4 h-4 rounded-full border-4 border-white dark:border-gray-900
    ${isCurrent ? 'bg-accent dark:bg-accent-dark animate-pulse-dot' : 'bg-blue-500'}
  `}></div>

  <!-- Connecting line -->
  {!isLast && (
    <div class="absolute left-[7px] top-5 bottom-0 w-0.5 bg-gradient-to-b from-accent/50 to-blue-500/50"></div>
  )}

  <!-- Content card -->
  <div class="bg-white dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700 p-6 shadow-md hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
    <div class="flex flex-col md:flex-row md:justify-between md:items-baseline mb-3">
      <h3 class="text-xl font-semibold text-text dark:text-gray-100">{title}</h3>
      <span class="text-sm text-gray-600 dark:text-gray-400 md:ml-4">{date}</span>
    </div>

    <p class="text-gray-600 dark:text-gray-400 mb-2 font-medium">
      {organization}{location && ` | ${location}`}
    </p>

    {description && (
      <p class="text-gray-700 dark:text-gray-300 mb-3 text-sm" set:html={description}></p>
    )}

    {bullets && bullets.length > 0 && (
      <ul class="space-y-2">
        {bullets.map((bullet) => (
          <li class="flex items-start gap-2 text-gray-700 dark:text-gray-300">
            <span class="text-accent dark:text-accent-dark mt-1 flex-shrink-0">â–¹</span>
            <span set:html={bullet} />
          </li>
        ))}
      </ul>
    )}
  </div>
</div>
